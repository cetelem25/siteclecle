<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>R√©visions 2GM ‚Äì QCM</title>
<style>
  body{margin:0;background:#0f1320;color:#e9ecf1;font:15px system-ui;padding:16px}
  h1{margin:8px 0 16px}
  nav a{color:#e9ecf1;margin-right:10px;text-decoration:none;font-weight:bold}
  section{background:#151a2b;border-radius:12px;padding:14px 16px;margin:10px 0}
  .btn{padding:8px 12px;background:#1b2140;border:1px solid #232a40;border-radius:8px;color:#fff;cursor:pointer;transition:0.15s;margin:6px 6px 6px 0}
  .btn:hover{filter:brightness(1.15)}
  fieldset.q{border:1px solid #232a40;padding:10px 12px;margin-bottom:12px;background:#1c2235;border-radius:8px}
  fieldset.q legend{font-weight:bold}
  label{display:block;margin:6px 0}
  .answer.ok{color:#4caf50;font-weight:700;margin-left:6px}
  .answer.ko{color:#f44336;font-weight:700;margin-left:6px}
  .answer.muted{color:#ccc;margin-left:6px}
  #qcmDatesScore{margin-top:12px;font-weight:bold}
  .note{color:#cbd5ff;font-size:13px;margin-top:8px}
</style>
</head>
<body>

<h1>üìù QCM ‚Äì Dates importantes (2GM)</h1>

<nav>
  <a href="index.html">Accueil</a> |
  <a href="qcm.html">QCM</a> |
  <a href="fill.html">Texte √† trous</a> |
  <a href="match.html">Relier</a> |
  <a href="videos.html">Vid√©os</a>
  <a href="anglais.html">Anglais</a>
</nav>

<section>
  <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;">
    <label style="margin:0">
      Nombre de questions :
      <select id="numDatesQ" style="margin-left:8px;padding:6px;border-radius:6px;background:#0f1420;color:#e9ecf1;border:1px solid #232a40">
        <option>5</option><option>8</option><option>10</option><option selected>30</option>
      </select>
    </label>
    <button class="btn" onclick="generateDatesQCM()">G√©n√©rer QCM</button>
    <button class="btn" onclick="resetDatesQCM()">R√©initialiser</button>
  </div>

  <form id="qcmDatesForm" style="margin-top:12px"></form>
  <div id="qcmDatesScore"></div>
  <div class="note">Astuce : si tu ne vois pas tout de suite les mises √† jour, force le rafra√Æchissement (Ctrl/Cmd+Shift+R).</div>
</section>

<script>
// ===== Liste des √©v√©nements / dates (chronologique) =====
const eventsDates = [
  {event:"Anschluss (Autriche)", date:"13 mars 1938"},
  {event:"Conf√©rence de Munich / Sud√®tes", date:"30 septembre 1938"},
  {event:"Annexion de la Boh√™me-Moravie", date:"15 mars 1939"},
  {event:"Invasion de la Pologne", date:"1er septembre 1939"},
  {event:"France & Royaume-Uni d√©clarent la guerre", date:"3 septembre 1939"},
  {event:"Dr√¥le de guerre", date:"3 septembre 1939 - 10 mai 1940"},
  {event:"Invasion du Danemark et de la Norv√®ge", date:"9 avril 1940"},
  {event:"Offensive allemande √† l'Ouest (campagne de France)", date:"10 mai - 22 juin 1940"},
  {event:"Armistice franco-allemand", date:"22 juin 1940"},
  {event:"Bataille d'Angleterre (Blitz)", date:"Juillet - octobre 1940"},
  {event:"L'Italie envahit la Gr√®ce", date:"28 octobre 1940"},
  {event:"Op√©ration Barbarossa (invasion URSS)", date:"22 juin 1941"},
  {event:"Actions des Einsatzgruppen", date:"Juin 1941 - 1944"},
  {event:"Attaque de Pearl Harbor", date:"7 d√©cembre 1941"},
  {event:"Entr√©e en guerre des √âtats-Unis", date:"8 d√©cembre 1941"},
  {event:"Bataille de Midway", date:"4 - 7 juin 1942"},
  {event:"Bataille de Stalingrad", date:"23 ao√ªt 1942 - 2 f√©vrier 1943"},
  {event:"Bataille d'El-Alamein", date:"23 octobre - 3 novembre 1942"},
  {event:"D√©barquement en Afrique du Nord (Op√©ration Torch)", date:"8 novembre 1942"},
  {event:"Conf√©rence de T√©h√©ran", date:"28 novembre - 1er d√©cembre 1943"},
  {event:"Op√©ration Bagration", date:"22 juin - 19 ao√ªt 1944"},
  {event:"Insurrection de Varsovie", date:"1er ao√ªt - 2 octobre 1944"},
  {event:"D√©barquement de Normandie (Overlord)", date:"6 juin 1944"},
  {event:"D√©barquement de Provence", date:"15 ao√ªt 1944"},
  {event:"Lib√©ration de Paris", date:"25 ao√ªt 1944"},
  {event:"Lib√©ration de Metz", date:"22 novembre 1944"},
  {event:"Lib√©ration de Strasbourg", date:"23 novembre 1944"},
  {event:"Bataille des Ardennes", date:"16 d√©cembre 1944 - 25 janvier 1945"},
  {event:"Lib√©ration du camp d'Auschwitz", date:"27 janvier 1945"},
  {event:"Bataille de Berlin", date:"16 avril - 2 mai 1945"},
  {event:"Suicide d'Hitler", date:"30 avril 1945"},
  {event:"Capitulation de l'Allemagne (fin guerre en Europe)", date:"8 mai 1945"},
  {event:"Bombardement d'Hiroshima", date:"6 ao√ªt 1945"},
  {event:"Bombardement de Nagasaki", date:"9 ao√ªt 1945"},
  {event:"Capitulation du Japon (fin Seconde Guerre mondiale)", date:"2 septembre 1945"}
];

// ===== Utilitaires =====
function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}
  return arr;
}

// ===== QCM =====
function generateDatesQCM(){
  const selCount = Number(document.getElementById('numDatesQ')?.value) || 30;
  const pool = shuffle([...eventsDates]).slice(0, Math.min(selCount, eventsDates.length));
  const form = document.getElementById('qcmDatesForm'); if(!form) return;
  form.innerHTML = '';
  pool.forEach((item, idx) => {
    // construire trois choix : la bonne date + 2 distracteurs al√©atoires
    const otherDates = shuffle(eventsDates.filter(e => e.date !== item.date).map(e => e.date)).slice(0,2);
    const choices = shuffle([item.date, ...otherDates]);
    const fs = document.createElement('fieldset'); fs.className = 'q';
    fs.innerHTML = `<legend>${idx+1}) Date de : <b>${item.event}</b> ?</legend>`;
    choices.forEach(c => {
      // √©chappe les quotes dans la value
      const safe = c.replace(/'/g, "\\'");
      fs.innerHTML += `<label><input type="radio" name="qd_${idx}" value='${safe}'> ${c}</label>`;
    });
    fs.innerHTML += `<span class='answer' id='qd_out_${idx}'></span>`;
    fs.dataset.correct = item.date;
    form.appendChild(fs);
  });
  form.innerHTML += `<button type="button" class="btn" onclick="gradeDatesQCM()">Corriger le QCM</button>`;
  document.getElementById('qcmDatesScore').textContent = '';
}

function gradeDatesQCM(){
  const sets = [...document.querySelectorAll('#qcmDatesForm fieldset')].filter(fs => fs.dataset.correct);
  let ok = 0;
  sets.forEach((fs, idx) => {
    const chosen = fs.querySelector(`input[name="qd_${idx}"]:checked`);
    const out = document.getElementById(`qd_out_${idx}`);
    if(!chosen){ out.textContent = '‚Äî'; out.className = 'answer muted'; }
    else if(chosen.value.trim() === fs.dataset.correct.trim()){ ok++; out.textContent = '‚úî'; out.className = 'answer ok'; }
    else{ out.textContent = `‚úñ (r√©p: ${fs.dataset.correct})`; out.className = 'answer ko'; }
  });
  document.getElementById('qcmDatesScore').textContent = `Score : ${ok}/${sets.length}`;
}

function resetDatesQCM(){
  const form = document.getElementById('qcmDatesForm'); if(form) form.innerHTML = '';
  const score = document.getElementById('qcmDatesScore'); if(score) score.textContent = '';
}

// G√©n√©rer automatiquement si on charge la page
window.addEventListener('load', ()=>{
  if(document.getElementById('qcmDatesForm')) generateDatesQCM();
});
</script>

</body>
</html>
